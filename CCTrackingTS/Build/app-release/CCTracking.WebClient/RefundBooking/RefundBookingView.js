var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define(["require","exports","../Helper","marionette","jquery","knockout","text!./RefundBookingTmpl.html"],function(e,t,n){function a(e,t){var n=JSON.parse(localStorage.getItem("lookupResponse"));e.model.actualBookingAmount(t.actualBookingAmount),e.model.refundReason(t.refundReason),e.model.refundAmount(t.refundAmount),e.model.amountDeducted(t.amountDeducted),e.model.refundReceipt(t.refundReceipt);var i=r.filter(n.refundType,function(e){return e.id==t.refundTypeId});i.length>0?e.model.refundTypeSelectedDesc(i[0].description):e.model.refundTypeSelectedDesc("");var s=r.filter(n.alkhidmatCentre,function(e){return e.id==t.refundOfficeLocation});s.length>0?e.model.refundFromOfficeDesc(s[0].description):e.model.refundFromOfficeDesc("");var o=r.filter(n.cashier,function(e){return e.id==t.refundOfficer});o.length>0?e.model.refundCashierDesc(o[0].description):e.model.refundCashierDesc(""),e.model.id(t.id)}var r=e("underscore"),i=e("text!./RefundBookingTmpl.html"),s,o=function(e){function t(t,n){var i=this;e.call(this,t,n),this.model.busSelected.subscribe(function(){var e=r.filter(i.model.refundBookings(),function(e){return e.busId==i.model.busSelected().id});a(i,e[0])})}return __extends(t,e),t}(n.ViewModel);t.RefundBookingViewModel=o;var u=function(e){function t(t){this.template=i,this.events={submit:"Save","click .jsCancel":"Cancel"},e.call(this,t)}return __extends(t,e),t.prototype.Cancel=function(){this.trigger("Event:CancelForm")},t.prototype.Save=function(e){e.preventDefault(),this.trigger("Event:SaveForm")},t}(n.Views.MvvmView);t.RefundBookingView=u});