define(["jquery","knockout","../jqueryUI/widget"],function(e,t){var n,r,i,s;return n="__kojqui_options",r=function(e,n){var r={};return t.utils.arrayForEach(n,function(n){e[n]!==undefined&&(r[n]=t.utils.unwrapObservable(e[n]))}),r},i=function(n,r,i){t.isObservable(i.refreshOn)&&t.computed({read:function(){i.refreshOn(),e(r)[n]("refresh")},disposeWhenNodeIsRemoved:r})},s=function(e){this.widgetName=e,this.widgetEventPrefix=e,this.options=[],this.events=[],this.hasRefresh=!1},s.prototype.init=function(s,o,u,a,f){var l,c,h,p;return l=this.widgetName,c=o(),h=r(c,this.options),p=r(c,this.events),t.applyBindingsToDescendants(f,s),t.utils.domData.set(s,n,h),e.each(p,function(e,t){p[e]=t.bind(a)}),e(s)[l](t.utils.extend(h,p)),this.hasRefresh&&i(l,s,c),t.isWriteableObservable(c.widget)&&c.widget(e(s)),t.utils.domNodeDisposal.addDisposeCallback(s,function(){e(s)[l]("destroy")}),{controlsDescendantBindings:!0}},s.prototype.update=function(i,s){var o,u,a,f;o=this.widgetName,u=s(),a=t.utils.domData.get(i,n),f=r(u,this.options),e.each(f,function(t,n){n!==a[t]&&e(i)[o]("option",t,f[t])}),t.utils.domData.set(i,n,f)},s.prototype.on=function(n,r,i){var s;r===this.widgetEventPrefix?s=r:s=this.widgetEventPrefix+r,s=[s.toLowerCase(),".",this.widgetName].join(""),e(n).on(s,i),t.utils.domNodeDisposal.addDisposeCallback(n,function(){e(n).off(s)})},s});