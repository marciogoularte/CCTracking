var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n};define(["require","exports","../Helper","marionette","jquery","knockout","text!./RefundBookingTmpl.html"],function(e,t,n){function o(e,t){var n=JSON.parse(localStorage.getItem("lookupResponse"));e.model.actualBookingAmount(t.actualBookingAmount),e.model.refundReason(t.refundReason),e.model.refundAmount(t.refundAmount),e.model.amountDeducted(t.amountDeducted),e.model.refundReceipt(t.refundReceipt);var o=r.filter(n.refundType,function(e){return e.id==t.refundTypeId});e.model.refundTypeSelectedDesc(o.length>0?o[0].description:"");var i=r.filter(n.alkhidmatCentre,function(e){return e.id==t.refundOfficeLocation});e.model.refundFromOfficeDesc(i.length>0?i[0].description:"");var u=r.filter(n.cashier,function(e){return e.id==t.refundOfficer});e.model.refundCashierDesc(u.length>0?u[0].description:""),e.model.id(t.id)}var r=e("underscore"),i=e("text!./RefundBookingTmpl.html"),u=function(e){function t(t,n){var i=this;e.call(this,t,n),this.model.busSelected.subscribe(function(){var e=r.filter(i.model.refundBookings(),function(e){return e.busId==i.model.busSelected().id});o(i,e[0])})}return __extends(t,e),t}(n.ViewModel);t.RefundBookingViewModel=u;var d=function(e){function t(t){this.template=i,this.events={submit:"Save","click .jsCancel":"Cancel"},e.call(this,t)}return __extends(t,e),t.prototype.Cancel=function(){this.trigger("Event:CancelForm")},t.prototype.Save=function(e){e.preventDefault(),this.trigger("Event:SaveForm")},t}(n.Views.MvvmView);t.RefundBookingView=d});