var __extends=this.__extends||function(n,i){function t(){this.constructor=n}for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);t.prototype=i.prototype,n.prototype=new t};define(["require","exports","./ModalHelper","marionette","datatablesBootstrap"],function(n,i,t){var e=(n("datatablesBootstrap"),function(i){function t(){if(i.call(this),t._instance)throw new Error("Error: Creating Application object.");t._instance=this,this.on("initialize:after",this.initializeAfter),this.addRegions({ContainerRegion:"#ContainerRegion",ModalRegion:"#ModalPopup",ModalAlertRegion:"#ModalAlertPopup"});var n=Marionette.Layout.extend({template:"#AppLayout",regions:{LoginRegion:"#LoginRegion",HeaderRegion:"#HeaderRegion",LeftRegion:"#LeftRegion",AdminLeftRegion:"#AdminLeftRegion",RightRegion:"#RightRegion",MainRegion:"#MainRegion",DetailRegion:"#DetailRegion",SubRegion:"#SubRegion",BusAvailabilityRegion:"#BusAvailabilityRegion"}});this.AppLayout=new n,this.LoginRegion=this.AppLayout.LoginRegion,this.HeaderRegion=this.AppLayout.HeaderRegion,this.LeftRegion=this.AppLayout.LeftRegion,this.AdminLeftRegion=this.AppLayout.AdminLeftRegion,this.RightRegion=this.AppLayout.RightRegion,this.MainRegion=this.AppLayout.MainRegion,this.DetailRegion=this.AppLayout.DetailRegion,this.SubRegion=this.AppLayout.SubRegion,this.BusAvailabilityRegion=this.AppLayout.BusAvailabilityRegion,Backbone.history&&Backbone.history.start()}return __extends(t,i),t.prototype.initializeAfter=function(){this.ContainerRegion.reset(),this.initalizeLocalStorage();var i=this.AppLayout;this.ContainerRegion.show(i),n(["./Login/LoginCtrl"],function(n){(new n.LoginCtrl).Load()})},t.prototype.applyRouting=function(i,t){var e=Backbone.Router.extend({routes:{user:"goUser",viewUser:"goViewUser",bus:"goBus",addBooking:"goAddBooking",editBooking:"goEditBooking",viewHome:"goViewHome",viewBooking:"goViewBooking",editPayment:"goPayment",alkhidmatCentre:"goStation",viewAlkhidmatCentre:"goViewStation",editRefund:"goCancel",busVisit:"gobusVisit",editBusVisit:"goEditBusVisit",viewBusVisit:"goViewBusVisit",busMilageReport:"goBusMilageReport",adminBus:"goAdminBus",viewAdminBus:"goViewAdminBus",searchBooking:"goSearchBooking",adminSearchBooking:"goAdminSearchBooking",driver:"goDriver",viewDriver:"goViewDriver",graveyard:"goGraveyard",viewGraveyard:"goViewGraveyard",town:"goTown",viewTown:"goViewTown",unionCouncil:"goUnionCouncil",viewUnionCouncil:"goViewUnionCouncil",landmark:"goLandmark",viewLandmark:"goViewLandmark",paymentType:"goPaymentType",viewPaymentType:"goViewPaymentType",refundType:"goRefundType",viewRefundType:"goViewRefundType",visitType:"goVisitType",viewVisitType:"goViewVisitType",causeOfDeath:"goCauseOfDeath",viewCauseOfDeath:"goViewCauseOfDeath",viewTest:"goViewTest",trackingDevice:"goTrackingDevice",viewTrackingDevice:"goViewTrackingDevice",nearestCentreSetup:"goNearestCentreSetup",viewNearestCentreSetup:"goViewNearestCentreSetup",driverSummary:"goDriverSummary",busVisitSummary:"goBusVisitSummary",busVisitMilageSummary:"goBusVisitMilageSummary",driverDetail:"",busVisitDetail:"",busVisitMilageDetail:"",changePassword:"goChangePassword",editExtraCharge:"goExtraCharge",auditBooking:"goAuditBooking",auditBusVisit:"goAuditBusVisit",auditPayment:"goAuditPayment",auditRefundBooking:"goAuditRefundBooking",busCentreReport:"goBusCentreReport",busFuelingReport:"goBusFuelingReport","*other":"defaultRoute"},goUser:function(){n(["./User/UserCtrl"],function(n){(new n.UserCtrl).Show()})},goViewUser:function(){n(["./User/UserCtrl"],function(n){(new n.UserCtrl).GetAll()})},goBus:function(){n(["./Bus/BusCtrl"],function(n){(new n.BusCtrl).Show()})},goAddBooking:function(){n(["./Booking/BookingCtrl"],function(n){(new n.BookingCtrl).Show()})},goEditBooking:function(){},goViewHome:function(){n(["./Home/HomeCtrl"],function(n){(new n.HomeCtrl).Show()})},goViewBooking:function(){n(["./Booking/BookingCtrl"],function(n){(new n.BookingCtrl).GetAll(1)})},goPayment:function(){},goStation:function(){n(["./Admin/AlkhidmatCentre/AlkhidmatCentreCtrl"],function(n){(new n.StationCtrl).Show()})},goViewStation:function(){n(["./Admin/AlkhidmatCentre/AlkhidmatCentreCtrl"],function(n){(new n.StationCtrl).GetAll()})},goCancel:function(){},goViewBusVisit:function(){n(["./Bus/BusVisit/BusVisitCtrl"],function(n){(new n.BusVisitCtrl).SimpleLoad()})},gobusVisit:function(){n(["./Bus/BusVisit/BusVisitCtrl"],function(n){(new n.BusVisitCtrl).Load()})},goEditBusVisit:function(){},goAdminBus:function(){n(["./Admin/Bus/BusCtrl"],function(n){(new n.BusCtrl).Show()})},goViewAdminBus:function(){n(["./Admin/Bus/BusCtrl"],function(n){(new n.BusCtrl).GetAll()})},goSearchBooking:function(){n(["./Search/SearchCtrl"],function(n){(new n.SearchCtrl).Show()})},goAdminSearchBooking:function(){n(["./Admin/AdminSearchBooking/AdminSearchBookingCtrl"],function(n){(new n.AdminSearchBookingCtrl).Show()})},goDriver:function(){n(["./Admin/Driver/DriverCtrl"],function(n){(new n.DriverCtrl).Show()})},goViewDriver:function(){n(["./Admin/Driver/DriverCtrl"],function(n){(new n.DriverCtrl).GetAll()})},goGraveyard:function(){n(["./Admin/Graveyard/GraveyardCtrl"],function(n){(new n.GraveyardCtrl).Show()})},goViewGraveyard:function(){n(["./Admin/Graveyard/GraveyardCtrl"],function(n){(new n.GraveyardCtrl).GetAll()})},goTown:function(){n(["./Admin/Town/TownCtrl"],function(n){(new n.TownCtrl).Show()})},goViewTown:function(){n(["./Admin/Town/TownCtrl"],function(n){(new n.TownCtrl).GetAll()})},goUnionCouncil:function(){n(["./Admin/UnionCouncil/UnionCouncilCtrl"],function(n){(new n.UnionCouncilCtrl).Show()})},goViewUnionCouncil:function(){n(["./Admin/UnionCouncil/UnionCouncilCtrl"],function(n){(new n.UnionCouncilCtrl).GetAll()})},goLandmark:function(){n(["./Admin/Landmark/LandmarkCtrl"],function(n){(new n.LandmarkCtrl).Show()})},goViewLandmark:function(){n(["./Admin/Landmark/LandmarkCtrl"],function(n){(new n.LandmarkCtrl).GetAll()})},goPaymentType:function(){n(["./Admin/PaymentType/PaymentTypeCtrl"],function(n){(new n.PaymentTypeCtrl).Show()})},goViewPaymentType:function(){n(["./Admin/PaymentType/PaymentTypeCtrl"],function(n){(new n.PaymentTypeCtrl).GetAll()})},goRefundType:function(){n(["./Admin/RefundType/RefundTypeCtrl"],function(n){(new n.RefundTypeCtrl).Show()})},goViewRefundType:function(){n(["./Admin/RefundType/RefundTypeCtrl"],function(n){(new n.RefundTypeCtrl).GetAll()})},goVisitType:function(){n(["./Admin/VisitType/VisitTypeCtrl"],function(n){(new n.VisitTypeCtrl).Show()})},goViewVisitType:function(){n(["./Admin/VisitType/VisitTypeCtrl"],function(n){(new n.VisitTypeCtrl).GetAll()})},goCauseOfDeath:function(){n(["./Admin/CauseOfDeath/CauseOfDeathCtrl"],function(n){(new n.CauseOfDeathCtrl).Show()})},goViewCauseOfDeath:function(){n(["./Admin/CauseOfDeath/CauseOfDeathCtrl"],function(n){(new n.CauseOfDeathCtrl).GetAll()})},goViewTest:function(){},goTrackingDevice:function(){n(["./Admin/TrackingDevice/TrackingDeviceCtrl"],function(n){(new n.TrackingDeviceCtrl).Show()})},goViewTrackingDevice:function(){n(["./Admin/TrackingDevice/TrackingDeviceCtrl"],function(n){(new n.TrackingDeviceCtrl).GetAll()})},goNearestCentreSetup:function(){n(["./Admin/NearestCentreSetup/NearestCentreSetupCtrl"],function(n){(new n.NearestCentreSetupCtrl).Show()})},goViewNearestCentreSetup:function(){n(["./Admin/NearestCentreSetup/NearestCentreSetupCtrl"],function(n){(new n.NearestCentreSetupCtrl).GetAll()})},goChangePassword:function(){n(["./ChangePassword/ChangePasswordCtrl"],function(n){(new n.ChangePasswordCtrl).Load()})},goExtraCharge:function(){},goDriverSummary:function(){n(["./Admin/Reports/Driver/DriverSummaryCtrl"],function(n){(new n.DriverSummaryCtrl).Show()})},goBusVisitSummary:function(){n(["./Admin/Reports/BusVisit/BusVisitSummaryCtrl"],function(n){(new n.BusVisitSummaryCtrl).ShowVisit()})},goBusVisitMilageSummary:function(){n(["./Admin/Reports/BusVisit/BusVisitSummaryCtrl"],function(n){(new n.BusVisitSummaryCtrl).ShowMilage()})},goAuditBooking:function(){n(["./Admin/Reports/Audit/Booking/AuditBookingCtrl"],function(n){(new n.AuditBookingCtrl).Show()})},goAuditBusVisit:function(){n(["./Admin/Reports/Audit/BusVisit/AuditBusVisitCtrl"],function(n){(new n.AuditBusVisitCtrl).Show()})},goAuditPayment:function(){n(["./Admin/Reports/Audit/Payment/AuditPaymentCtrl"],function(n){(new n.AuditPaymentCtrl).Show()})},goAuditRefundBooking:function(){n(["./Admin/Reports/Audit/Refund/AuditRefundBookingCtrl"],function(n){(new n.AuditRefundBookingCtrl).Show()})},goBusCentreReport:function(){n(["./Admin/Reports/Centre/BusCentreReport/BusCentreReportCtrl"],function(n){(new n.BusCentreReportCtrl).Show()})},goBusMilageReport:function(){n(["./Admin/Reports/Bus/BusMilage/BusMilageCtrl"],function(n){(new n.BusMilageCtrl).Show()})},goBusFuelingReport:function(){n(["./Admin/Reports/BusFueling/BusFuelingReportCtrl"],function(n){(new n.BusFuelingReportCtrl).Show()})},defaultRoute:function(){i.ContainerRegion.reset(),i.ContainerRegion.show(t),n(["./Login/LoginCtrl"],function(n){(new n.LoginCtrl).Load()})}});this.AppRoutes=new e},t.prototype.applyRoutingForOperator=function(i,t){var e=Backbone.Router.extend({routes:{addBooking:"goAddBooking",editBooking:"goEditBooking",viewBooking:"goViewBooking",editPayment:"goPayment",alkhidmatCentre:"goStation",editRefund:"goCancel",busVisit:"gobusVisit",editBusVisit:"goEditBusVisit",viewBusVisit:"goViewBusVisit",searchBooking:"goSearchBooking",changePassword:"goChangePassword",editExtraCharge:"goExtraCharge","*other":"defaultRoute"},goUser:function(){n(["./User/UserCtrl"],function(n){(new n.UserCtrl).Show()})},goViewUser:function(){n(["./User/UserCtrl"],function(n){(new n.UserCtrl).GetAll()})},goBus:function(){n(["./Bus/BusCtrl"],function(n){(new n.BusCtrl).Show()})},goAddBooking:function(){n(["./Booking/BookingCtrl"],function(n){(new n.BookingCtrl).Show()})},goEditBooking:function(){},goViewHome:function(){n(["./Home/HomeCtrl"],function(n){(new n.HomeCtrl).Show()})},goViewBooking:function(){n(["./Booking/BookingCtrl"],function(n){(new n.BookingCtrl).GetAll(1)})},goPayment:function(){},goStation:function(){n(["./Admin/AlkhidmatCentre/AlkhidmatCentreCtrl"],function(n){(new n.StationCtrl).Show()})},goViewStation:function(){n(["./Admin/AlkhidmatCentre/AlkhidmatCentreCtrl"],function(n){(new n.StationCtrl).GetAll()})},goCancel:function(){},goViewBusVisit:function(){n(["./Bus/BusVisit/BusVisitCtrl"],function(n){(new n.BusVisitCtrl).SimpleLoad()})},gobusVisit:function(){n(["./Bus/BusVisit/BusVisitCtrl"],function(n){(new n.BusVisitCtrl).Load()})},goEditBusVisit:function(){},goAdminBus:function(){n(["./Admin/Bus/BusCtrl"],function(n){(new n.BusCtrl).Show()})},goViewAdminBus:function(){n(["./Admin/Bus/BusCtrl"],function(n){(new n.BusCtrl).GetAll()})},goSearchBooking:function(){n(["./Search/SearchCtrl"],function(n){(new n.SearchCtrl).Show()})},goAdminSearchBooking:function(){n(["./Admin/AdminSearchBooking/AdminSearchBookingCtrl"],function(n){(new n.AdminSearchBookingCtrl).Show()})},goDriver:function(){n(["./Admin/Driver/DriverCtrl"],function(n){(new n.DriverCtrl).Show()})},goViewDriver:function(){n(["./Admin/Driver/DriverCtrl"],function(n){(new n.DriverCtrl).GetAll()})},goGraveyard:function(){n(["./Admin/Graveyard/GraveyardCtrl"],function(n){(new n.GraveyardCtrl).Show()})},goViewGraveyard:function(){n(["./Admin/Graveyard/GraveyardCtrl"],function(n){(new n.GraveyardCtrl).GetAll()})},goTown:function(){n(["./Admin/Town/TownCtrl"],function(n){(new n.TownCtrl).Show()})},goViewTown:function(){n(["./Admin/Town/TownCtrl"],function(n){(new n.TownCtrl).GetAll()})},goUnionCouncil:function(){n(["./Admin/UnionCouncil/UnionCouncilCtrl"],function(n){(new n.UnionCouncilCtrl).Show()})},goViewUnionCouncil:function(){n(["./Admin/UnionCouncil/UnionCouncilCtrl"],function(n){(new n.UnionCouncilCtrl).GetAll()})},goLandmark:function(){n(["./Admin/Landmark/LandmarkCtrl"],function(n){(new n.LandmarkCtrl).Show()})},goViewLandmark:function(){n(["./Admin/Landmark/LandmarkCtrl"],function(n){(new n.LandmarkCtrl).GetAll()})},goPaymentType:function(){n(["./Admin/PaymentType/PaymentTypeCtrl"],function(n){(new n.PaymentTypeCtrl).Show()})},goViewPaymentType:function(){n(["./Admin/PaymentType/PaymentTypeCtrl"],function(n){(new n.PaymentTypeCtrl).GetAll()})},goRefundType:function(){n(["./Admin/RefundType/RefundTypeCtrl"],function(n){(new n.RefundTypeCtrl).Show()})},goViewRefundType:function(){n(["./Admin/RefundType/RefundTypeCtrl"],function(n){(new n.RefundTypeCtrl).GetAll()})},goVisitType:function(){n(["./Admin/VisitType/VisitTypeCtrl"],function(n){(new n.VisitTypeCtrl).Show()})},goViewVisitType:function(){n(["./Admin/VisitType/VisitTypeCtrl"],function(n){(new n.VisitTypeCtrl).GetAll()})},goCauseOfDeath:function(){n(["./Admin/CauseOfDeath/CauseOfDeathCtrl"],function(n){(new n.CauseOfDeathCtrl).Show()})},goViewCauseOfDeath:function(){n(["./Admin/CauseOfDeath/CauseOfDeathCtrl"],function(n){(new n.CauseOfDeathCtrl).GetAll()})},goViewTest:function(){},goTrackingDevice:function(){n(["./Admin/TrackingDevice/TrackingDeviceCtrl"],function(n){(new n.TrackingDeviceCtrl).Show()})},goViewTrackingDevice:function(){n(["./Admin/TrackingDevice/TrackingDeviceCtrl"],function(n){(new n.TrackingDeviceCtrl).GetAll()})},goNearestCentreSetup:function(){n(["./Admin/NearestCentreSetup/NearestCentreSetupCtrl"],function(n){(new n.NearestCentreSetupCtrl).Show()})},goViewNearestCentreSetup:function(){n(["./Admin/NearestCentreSetup/NearestCentreSetupCtrl"],function(n){(new n.NearestCentreSetupCtrl).GetAll()})},goChangePassword:function(){n(["./ChangePassword/ChangePasswordCtrl"],function(n){(new n.ChangePasswordCtrl).Load()})},goExtraCharge:function(){},goDriverSummary:function(){n(["./Admin/Reports/Driver/DriverSummaryCtrl"],function(n){(new n.DriverSummaryCtrl).Show()})},goBusVisitSummary:function(){n(["./Admin/Reports/BusVisit/BusVisitSummaryCtrl"],function(n){(new n.BusVisitSummaryCtrl).ShowVisit()})},goBusVisitMilageSummary:function(){n(["./Admin/Reports/BusVisit/BusVisitSummaryCtrl"],function(n){(new n.BusVisitSummaryCtrl).ShowMilage()})},goAuditBooking:function(){n(["./Admin/Reports/Audit/Booking/AuditBookingCtrl"],function(n){(new n.AuditBookingCtrl).Show()})},goAuditBusVisit:function(){n(["./Admin/Reports/Audit/BusVisit/AuditBusVisitCtrl"],function(n){(new n.AuditBusVisitCtrl).Show()})},goAuditPayment:function(){n(["./Admin/Reports/Audit/Payment/AuditPaymentCtrl"],function(n){(new n.AuditPaymentCtrl).Show()})},goAuditRefundBooking:function(){n(["./Admin/Reports/Audit/Refund/AuditRefundBookingCtrl"],function(n){(new n.AuditRefundBookingCtrl).Show()})},goBusCentreReport:function(){n(["./Admin/Reports/Centre/BusCentreReport/BusCentreReportCtrl"],function(n){(new n.BusCentreReportCtrl).Show()})},goBusMilageReport:function(){n(["./Admin/Reports/Bus/BusMilage/BusMilageCtrl"],function(n){(new n.BusMilageCtrl).Show()})},goBusFuelingReport:function(){n(["./Admin/Reports/BusFueling/BusFuelingReportCtrl"],function(n){(new n.BusFuelingReportCtrl).Show()})},defaultRoute:function(){i.ContainerRegion.reset(),i.ContainerRegion.show(t),n(["./Login/LoginCtrl"],function(n){(new n.LoginCtrl).Load()})}});this.AppRoutes=new e},t.prototype.goViewBooking=function(){n(["./Booking/BookingCtrl"],function(n){(new n.BookingCtrl).GetAll(1)}),this.AppRoutes.navigate("viewBooking")},t.prototype.initalizeLocalStorage=function(){null!=localStorage.getItem("lookupResponse")&&localStorage.removeItem("lookupResponse"),n(["./DAL/Booking"],function(n){var i=n.Load();i.done(function(n){localStorage.setItem("lookupResponse",JSON.stringify(n))})})},t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t._instance=null,t}(Marionette.Application));i.Application=e,$(function(){var n=e.getInstance();n.start();var i=new t.ModalRegion({el:"#ModalPopup"}),o=new t.ModalRegion({el:"#ModalAlertPopup"});n.ModalRegion=i,n.ModalAlertRegion=o})});