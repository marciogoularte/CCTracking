var __extends=this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);o.prototype=t.prototype,e.prototype=new o};define(["require","exports","./App","underscore","jquery","knockout","knockback","marionette","backbone","accounting"],function(e,t,o){function n(t,o,n){e(["./Booking/BookingLeft/BookingLeftCtrl"],function(e){(new e.BookingLeftCtrl).ShowModalPopup(t,o,n)})}function i(){e(["./Booking/BookingLeft/BookingLeftCtrl"],function(e){(new e.BookingLeftCtrl).ShowProgressbar()})}function r(){e(["./Booking/BookingLeft/BookingLeftCtrl"],function(e){(new e.BookingLeftCtrl).HideProgressbar()})}function c(t){e(["./Booking/BookingLeft/BookingLeftCtrl"],function(e){(new e.BookingLeftCtrl).PrintReceipt(t)})}function a(t,o){var n=null;e(["./Booking/BookingLeft/BookingLeftView"],function(e){n=new e.BusDetailModalPopupCollectionView({collection:o,model:t}),w.ModalAlertRegion.show(n)})}function u(){var e=m('[data-role="validate"]'),t=0;e.popover({placement:"bottom"}),e.on("invalid",function(){0===t&&(m("#"+this.id).popover("show"),t++)}),e.on("blur",function(){m("#"+this.id).popover("hide")});var o=function(e){return t=0,-1===e.indexOf("#")&&(e="#"+e),m(e)[0].checkValidity()};return{validate:o}}function l(e){return new Date(e).toLocaleDateString()}function s(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=o.exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function d(e){return h.formatMoney(e)}function f(){return 50}function p(){return 60}function g(){w.vent.trigger("Event-PrintDocument")}function k(){var e=[],t=m(".PrintArea"),o="popup",n="popup"==o&&!0,i="",r='<meta charset="utf-8" />,<meta http-equiv="X - UA - Compatible" content="IE = edge"/>',c={mode:o,popClose:n,extraCss:i,retainAttr:e,extraHead:r};m(t).printArea(c)}var m=e("jquery"),h=e("accounting"),y=e("knockout"),v=e("knockback"),w=o.Application.getInstance();String.prototype.getOuterHTML=function(e){return m(this.toString()).find(e)[0].outerHTML},w.vent.on("Event:UpdateSummary",function(){e(["./Booking/BookingLeft/BookingLeftCtrl"],function(e){(new e.BookingLeftCtrl).Show()})}),w.vent.on("Event-PrintDocument",function(){k()}),m.extend(!0,m.fn.dataTable.defaults,{sDom:"<'row'<'col-xs-12 col-sm-12 col-md-12 hidden'l><'col-xs-12 col-sm-12 col-md-12 text-right'f>r>t<'row'<'col-xs-12 col-sm-12 col-md-12'i><'col-xs-12 col-sm-12 col-md-12 text-center'p>>",language:{search:"Filter: "}}),h.settings={currency:{symbol:"",format:"%s%v",decimal:".",thousand:",",precision:2},number:{precision:0,thousand:",",decimal:"."}};var C=function(){function e(){}return e}();t.Controller=C;var B=function(){function e(e,t){this.model=v.viewModel(e),this.bbModel=e,this.controller=t}return e}();t.ViewModel=B;var b=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype["default"]=function(){return{centreDesc:"",receiptNo:"",printDateAndTime:"",bookingId:"",bookingDate:"",cashReceivedFrom:"",totalAmountDue:"",userName:"",isActive:"",createdBy:"",createdDate:"",modifiedBy:"",modifiedDate:""}},t}(Backbone.Model);t.ReceiptLayoutDto=b;var M=function(e){function t(t){this.model=b,e.call(this,t)}return __extends(t,e),t}(Backbone.Collection);t.ReceiptLayoutCollection=M,function(e){var t=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(Marionette.CollectionView);e.CollectionView=t;var o=function(e){function t(t){t||(t={}),e.call(this,t)}return __extends(t,e),t}(Marionette.CompositeView);e.CompositeView=o;var n=function(e){function t(t){t||(t={}),e.call(this,t)}return __extends(t,e),t}(Marionette.ItemView);e.ItemView=n;var i=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){void 0!==e.viewModel&&(this.viewModel=e.viewModel,e.model=this.viewModel.model)},t.prototype.onShow=function(){y.applyBindings(this.viewModel,this.el)},t.prototype.onClose=function(){y.cleanNode(m(this.el)[0])},t}(n);e.MvvmView=i}(t.Views||(t.Views={}));t.Views;t.ShowModalPopup=n,t.ShowProgressbar=i,t.HideProgressbar=r,t.PrintReceipt=c,t.ShowBusDetailModalPopup=a,m.ajaxSetup({beforeSend:function(e){t.ShowProgressbar(),w.reqres.hasHandler("AppGlobalSetting")&&e.setRequestHeader("AuthenticationToken",w.request("AppGlobalSetting").get("AuthenticationToken"))},complete:function(){t.HideProgressbar()}}),t.ValidationUtility=u,t.FormatDateString=l,t.GetParameterByName=s,t.FormatMoney=d,t.GetPageSize=f,t.GetNoOfDaysConfiguration=p,function(e){e[e.PatrolPump=1]="PatrolPump",e[e.Booking=2]="Booking",e[e.Maintenance=3]="Maintenance",e[e.Others=4]="Others"}(t.VisitTypes||(t.VisitTypes={}));t.VisitTypes;y.bindingHandlers.numeric={init:function(e){m(e).on("keydown",function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||13==e.keyCode||65==e.keyCode&&e.ctrlKey===!0||188==e.keyCode||190==e.keyCode||110==e.keyCode||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()})}},t.PrintDocument=g});